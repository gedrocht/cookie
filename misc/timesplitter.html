<html>
<head>
<style>
body {
    font-family: Arial;
}
input {
    font-family: Arial;
    font-size: 24pt;
    text-align: right;
}
div {
    font-family: Arial;
    line-height: 1.3;
    font-size: 24pt;
    margin-top: 10px;
}
</style>
<script>
let pokemon_sounds = [
"pokemon_sounds/Absorb.wav",
"pokemon_sounds/Absorb1.wav",
"pokemon_sounds/Absorb2.wav",
"pokemon_sounds/Acid.wav",
"pokemon_sounds/AcidArmor.wav",
"pokemon_sounds/Agility.wav",
"pokemon_sounds/Amnesia.wav",
"pokemon_sounds/AuroraBeam.wav",
"pokemon_sounds/AuroraBeam1.wav",
"pokemon_sounds/AuroraBeam2.wav",
"pokemon_sounds/AuroraBeam3.wav",
"pokemon_sounds/AuroraBeamDirect.wav",
"pokemon_sounds/Barrage.wav",
"pokemon_sounds/Barrage1.wav",
"pokemon_sounds/Barrage2.wav",
"pokemon_sounds/BarrageDirect.wav",
"pokemon_sounds/Barrier.wav",
"pokemon_sounds/BarrierDelay.wav",
"pokemon_sounds/BarrierSingle.wav",
"pokemon_sounds/Bide.wav",
"pokemon_sounds/Bind.wav",
"pokemon_sounds/Bite.wav",
"pokemon_sounds/Blizzard.wav",
"pokemon_sounds/Blizzard1.wav",
"pokemon_sounds/Blizzard2.wav",
"pokemon_sounds/BlizzardDirect.wav",
"pokemon_sounds/BodySlam.wav",
"pokemon_sounds/BoneClub.wav",
"pokemon_sounds/Bonemerang.wav",
"pokemon_sounds/Bonemerang1.wav",
"pokemon_sounds/Bonemerang2.wav",
"pokemon_sounds/Bubble.wav",
"pokemon_sounds/Bubblebeam.wav",
"pokemon_sounds/Bubblebeam1.wav",
"pokemon_sounds/Bubblebeam2.wav",
"pokemon_sounds/Bubblebeam3.wav",
"pokemon_sounds/BubblebeamDirect.wav",
"pokemon_sounds/Clamp.wav",
"pokemon_sounds/CometPunch.wav",
"pokemon_sounds/CometPunchDelay.wav",
"pokemon_sounds/CometPunchSingle.wav",
"pokemon_sounds/Confused.wav",
"pokemon_sounds/Confused2.wav",
"pokemon_sounds/ConfuseRay.wav",
"pokemon_sounds/Confusion.wav",
"pokemon_sounds/Constrict.wav",
"pokemon_sounds/Conversion.wav",
"pokemon_sounds/Conversion1.wav",
"pokemon_sounds/Conversion2.wav",
"pokemon_sounds/Counter.wav",
"pokemon_sounds/Crabhammer.wav",
"pokemon_sounds/Cut.wav",
"pokemon_sounds/DefenseCurl.wav",
"pokemon_sounds/Dig.wav",
"pokemon_sounds/Disable.wav",
"pokemon_sounds/DizzyPunch.wav",
"pokemon_sounds/DizzyPunch1Single.wav",
"pokemon_sounds/DizzyPunch2.wav",
"pokemon_sounds/DoubleEdge.wav",
"pokemon_sounds/DoubleKick.wav",
"pokemon_sounds/DoubleKickSingle.wav",
"pokemon_sounds/DoubleSlap.wav",
"pokemon_sounds/DoubleTeam.wav",
"pokemon_sounds/DoubleTeamFull.wav",
"pokemon_sounds/DoubleTeamShield.wav",
"pokemon_sounds/DragonRage.wav",
"pokemon_sounds/DragonRage1.wav",
"pokemon_sounds/DragonRage2.wav",
"pokemon_sounds/DragonRageDirect.wav",
"pokemon_sounds/DreamEater.wav",
"pokemon_sounds/DrillPeck.wav",
"pokemon_sounds/Earthquake.wav",
"pokemon_sounds/Earthquake1.wav",
"pokemon_sounds/Earthquake2.wav",
"pokemon_sounds/EarthquakeDirect.wav",
"pokemon_sounds/EggBomb.wav",
"pokemon_sounds/EggBomb1.wav",
"pokemon_sounds/EggBomb2.wav",
"pokemon_sounds/EggBomb3.wav",
"pokemon_sounds/Ember.wav",
"pokemon_sounds/Explosion.wav",
"pokemon_sounds/Explosion1.wav",
"pokemon_sounds/Explosion2.wav",
"pokemon_sounds/Explosion3.wav",
"pokemon_sounds/FireBlast.wav",
"pokemon_sounds/FireBlast1.wav",
"pokemon_sounds/FireBlast2.wav",
"pokemon_sounds/FirePunch.wav",
"pokemon_sounds/FireSpin.wav",
"pokemon_sounds/FireSpin1.wav",
"pokemon_sounds/FireSpin2.wav",
"pokemon_sounds/Fissure.wav",
"pokemon_sounds/Fissure1.wav",
"pokemon_sounds/Fissure2.wav",
"pokemon_sounds/Flamethrower.wav",
"pokemon_sounds/Flash.wav",
"pokemon_sounds/FlyHit.wav",
"pokemon_sounds/FlyUp.wav",
"pokemon_sounds/FlyUp1.wav",
"pokemon_sounds/FlyUp2.wav",
"pokemon_sounds/FocusEnergy.wav",
"pokemon_sounds/FuryAttack.wav",
"pokemon_sounds/FurySwipes.wav",
"pokemon_sounds/Glare.wav",
"pokemon_sounds/Growth.wav",
"pokemon_sounds/Guillotine.wav",
"pokemon_sounds/Gust.wav",
"pokemon_sounds/GustSingle.wav",
"pokemon_sounds/Harden.wav",
"pokemon_sounds/Haze.wav",
"pokemon_sounds/Headbutt.wav",
"pokemon_sounds/HighJumpKick.wav",
"pokemon_sounds/HornAttack.wav",
"pokemon_sounds/HornDrill.wav",
"pokemon_sounds/HydroPump.wav",
"pokemon_sounds/HydroPump1.wav",
"pokemon_sounds/HydroPump2.wav",
"pokemon_sounds/HydroPump3.wav",
"pokemon_sounds/HydroPumpDirect.wav",
"pokemon_sounds/HydroPumpSingle.wav",
"pokemon_sounds/HyperBeam.wav",
"pokemon_sounds/HyperBeam1.wav",
"pokemon_sounds/HyperBeam2.wav",
"pokemon_sounds/HyperBeam3.wav",
"pokemon_sounds/HyperBeamLaser.wav",
"pokemon_sounds/HyperBeamLaserDirect.wav",
"pokemon_sounds/HyperFang.wav",
"pokemon_sounds/HyperFang1.wav",
"pokemon_sounds/HyperFang2.wav",
"pokemon_sounds/Hypnosis.wav",
"pokemon_sounds/IceBeam.wav",
"pokemon_sounds/IceBeam1.wav",
"pokemon_sounds/IceBeam2.wav",
"pokemon_sounds/IceBeam3.wav",
"pokemon_sounds/IcePunch.wav",
"pokemon_sounds/IMHITSUPER_Super_Effective.wav",
"pokemon_sounds/IMHITWEAK_Not_Very_Effective.wav",
"pokemon_sounds/IMHIT_Damage.wav",
"pokemon_sounds/JumpKick.wav",
"pokemon_sounds/KarateChop.wav",
"pokemon_sounds/KarateChopWHit.wav",
"pokemon_sounds/Kinesis.wav",
"pokemon_sounds/LeechLife.wav",
"pokemon_sounds/LeechLife1.wav",
"pokemon_sounds/LeechLife2.wav",
"pokemon_sounds/LeechSeed.wav",
"pokemon_sounds/Leer.wav",
"pokemon_sounds/Lick.wav",
"pokemon_sounds/Lick1.wav",
"pokemon_sounds/Lick2.wav",
"pokemon_sounds/Lick3.wav",
"pokemon_sounds/LightScreen.wav",
"pokemon_sounds/LightScreenDelay.wav",
"pokemon_sounds/LightScreenSingle.wav",
"pokemon_sounds/LovelyKiss.wav",
"pokemon_sounds/LowKick.wav",
"pokemon_sounds/Meditate.wav",
"pokemon_sounds/MegaDrain.wav",
"pokemon_sounds/MegaDrain1.wav",
"pokemon_sounds/MegaDrain2.wav",
"pokemon_sounds/MegaKick.wav",
"pokemon_sounds/MegaPunch.wav",
"pokemon_sounds/Metronome.wav",
"pokemon_sounds/MetronomeSingle.wav",
"pokemon_sounds/Mimic1.wav",
"pokemon_sounds/Mimic2.wav",
"pokemon_sounds/Minimize.wav",
"pokemon_sounds/Mist.wav",
"pokemon_sounds/Mist1.wav",
"pokemon_sounds/Mist2.wav",
"pokemon_sounds/Mist3.wav",
"pokemon_sounds/NightShade.wav",
"pokemon_sounds/Payday.wav",
"pokemon_sounds/Payday1.wav",
"pokemon_sounds/Payday2.wav",
"pokemon_sounds/Peck.wav",
"pokemon_sounds/PetalDance.wav",
"pokemon_sounds/Poisoned.wav",
"pokemon_sounds/PoisonGas.wav",
"pokemon_sounds/PoisonPowder.wav",
"pokemon_sounds/PoisonSting.wav",
"pokemon_sounds/Pound.wav",
"pokemon_sounds/Psybeam(LOOP).wav",
"pokemon_sounds/Psybeam.wav",
"pokemon_sounds/Psybeam1.wav",
"pokemon_sounds/Psybeam2.wav",
"pokemon_sounds/Psybeam3.wav",
"pokemon_sounds/PsybeamDirect.wav",
"pokemon_sounds/Psychic.wav",
"pokemon_sounds/Psychic1.wav",
"pokemon_sounds/Psychic2.wav",
"pokemon_sounds/Psychic3.wav",
"pokemon_sounds/Psywave.wav",
"pokemon_sounds/Psywave1.wav",
"pokemon_sounds/Psywave2.wav",
"pokemon_sounds/Psywave3.wav",
"pokemon_sounds/QuickAttack.wav",
"pokemon_sounds/Rage.wav",
"pokemon_sounds/RazorLeaf.wav",
"pokemon_sounds/RazorLeaf1.wav",
"pokemon_sounds/RazorLeaf2.wav",
"pokemon_sounds/RazorWind.wav",
"pokemon_sounds/Recover.wav",
"pokemon_sounds/Recover1.wav",
"pokemon_sounds/Recover2.wav",
"pokemon_sounds/RecoverDirect.wav",
"pokemon_sounds/Reflect.wav",
"pokemon_sounds/ReflectDelay.wav",
"pokemon_sounds/ReflectSingle.wav",
"pokemon_sounds/Rest.wav",
"pokemon_sounds/RockSlide.wav",
"pokemon_sounds/RockSlide1.wav",
"pokemon_sounds/RockSlide2.wav",
"pokemon_sounds/RockSlide3.wav",
"pokemon_sounds/RockThrow.wav",
"pokemon_sounds/RollingKick.wav",
"pokemon_sounds/SandAttack.wav",
"pokemon_sounds/Scratch.wav",
"pokemon_sounds/Screech(LOOP).wav",
"pokemon_sounds/Screech.wav",
"pokemon_sounds/SeismicToss.wav",
"pokemon_sounds/SelfDestruct.wav",
"pokemon_sounds/SelfDestruct1.wav",
"pokemon_sounds/SelfDestruct2.wav",
"pokemon_sounds/SelfDestruct3.wav",
"pokemon_sounds/Sharpen.wav",
"pokemon_sounds/Sharpen1.wav",
"pokemon_sounds/Sharpen2.wav",
"pokemon_sounds/Sing.wav",
"pokemon_sounds/SkullBash.wav",
"pokemon_sounds/SkyAttack.wav",
"pokemon_sounds/Slam.wav",
"pokemon_sounds/Slash.wav",
"pokemon_sounds/Sleeping.wav",
"pokemon_sounds/SleepPowder.wav",
"pokemon_sounds/Sludge.wav",
"pokemon_sounds/Sludge1.wav",
"pokemon_sounds/Sludge2.wav",
"pokemon_sounds/Sludge3.wav",
"pokemon_sounds/Smog.wav",
"pokemon_sounds/SmokeScreen.wav",
"pokemon_sounds/Softboiled.wav",
"pokemon_sounds/Softboiled1.wav",
"pokemon_sounds/Softboiled2.wav",
"pokemon_sounds/Softboiled3.wav",
"pokemon_sounds/SolarBeam.wav",
"pokemon_sounds/SolarBeam1.wav",
"pokemon_sounds/SolarBeam2+3Direct.wav",
"pokemon_sounds/SolarBeam2.wav",
"pokemon_sounds/SolarBeam3.wav",
"pokemon_sounds/Sonicboom.wav",
"pokemon_sounds/Sonicboom1Single.wav",
"pokemon_sounds/Sonicboom2Single.wav",
"pokemon_sounds/SpikeCannon.wav",
"pokemon_sounds/Splash.wav",
"pokemon_sounds/Spore.wav",
"pokemon_sounds/Stomp.wav",
"pokemon_sounds/Strength.wav",
"pokemon_sounds/StringShot.wav",
"pokemon_sounds/Struggle.wav",
"pokemon_sounds/StunSpore.wav",
"pokemon_sounds/Submission.wav",
"pokemon_sounds/Substitute.wav",
"pokemon_sounds/Substitute1.wav",
"pokemon_sounds/Substitute2.wav",
"pokemon_sounds/Substitute3.wav",
"pokemon_sounds/SuperFang.wav",
"pokemon_sounds/Supersonic.wav",
"pokemon_sounds/Supersonic1.wav",
"pokemon_sounds/Supersonic2.wav",
"pokemon_sounds/Surf.wav",
"pokemon_sounds/SurfDirect.wav",
"pokemon_sounds/Swift.wav",
"pokemon_sounds/Swift1.wav",
"pokemon_sounds/Swift2.wav",
"pokemon_sounds/SwordsDance.wav",
"pokemon_sounds/SwordsDanceSingle.wav",
"pokemon_sounds/Tackle.wav",
"pokemon_sounds/TailWhip.wav",
"pokemon_sounds/TailWhipSingle.wav",
"pokemon_sounds/TakeDown.wav",
"pokemon_sounds/Teleport.wav",
"pokemon_sounds/Thrash.wav",
"pokemon_sounds/Thunder.wav",
"pokemon_sounds/Thunder1.wav",
"pokemon_sounds/Thunder2.wav",
"pokemon_sounds/Thunder3.wav",
"pokemon_sounds/Thunderbolt.wav",
"pokemon_sounds/Thunderbolt1.wav",
"pokemon_sounds/Thunderbolt2.wav",
"pokemon_sounds/Thunderbolt3.wav",
"pokemon_sounds/ThunderPunch.wav",
"pokemon_sounds/ThunderShock.wav",
"pokemon_sounds/ThunderShock1.wav",
"pokemon_sounds/ThunderShock2.wav",
"pokemon_sounds/ThunderShock3.wav",
"pokemon_sounds/ThunderWave.wav",
"pokemon_sounds/ThunderWave1.wav",
"pokemon_sounds/ThunderWave2.wav",
"pokemon_sounds/ThunderWave3.wav",
"pokemon_sounds/ThunderWaveDirect.wav",
"pokemon_sounds/Toxic.wav",
"pokemon_sounds/Toxic1.wav",
"pokemon_sounds/Toxic2.wav",
"pokemon_sounds/Toxic3.wav",
"pokemon_sounds/Transform.wav",
"pokemon_sounds/TriAttack.wav",
"pokemon_sounds/TriAttack1.wav",
"pokemon_sounds/TriAttack2.wav",
"pokemon_sounds/TwinNeedle.wav",
"pokemon_sounds/TwinNeedleSingle.wav",
"pokemon_sounds/ViceGrip.wav",
"pokemon_sounds/VineWhip.wav",
"pokemon_sounds/Waterfall.wav",
"pokemon_sounds/Waterfall1.wav",
"pokemon_sounds/Waterfall23.wav",
"pokemon_sounds/WaterGun.wav",
"pokemon_sounds/WaterGun1.wav",
"pokemon_sounds/WaterGun2.wav",
"pokemon_sounds/Whirlwind.wav",
"pokemon_sounds/WingAttack.wav",
"pokemon_sounds/WingAttackSingle.wav",
"pokemon_sounds/Withdraw.wav",
"pokemon_sounds/Withdraw1.wav",
"pokemon_sounds/Withdraw2.wav",
"pokemon_sounds/WithdrawDirect.wav",
"pokemon_sounds/Wrap.wav",
"pokemon_sounds/WrapSingle.wav"]


get_random_pokemon_sound = () => pokemon_sounds[Math.floor(Math.random()*pokemon_sounds.length)]

SHOULD_PLAY_FINISHED_SOUND = true;

timers = new Array();
alarms = []
haveSoundedFinishAlarm = true;

function init(){
    window.onbeforeunload = function() {
        if ( !allTimersAreDone() ) {
            return 'Not all alarms have sounded.';
        }
    };

    main      = document.getElementById("main");
    startTime = document.getElementById("start");
    stopTime  = document.getElementById("stop");
    intervals = document.getElementById("intervals");
    nowButton = document.getElementById("nowButton");
    
	//alarm = new Audio("shots.mp3")
    alarm = new Audio("TakeOneShot.wav");
    //alarm = new Audio("chime.mp3");
    alarm.volume = 1.0;
    alarms.push(alarm);
    
	//alarm_alt = new Audio("shots.mp3")
    alarm_alt = new Audio("drink.mp3");
    //alarm_alt = new Audio("chime.mp3");
    alarm_alt.volume = 1.0;
    alarms.push(alarm_alt);
    
    //finished_sound = new Audio("a_little_drunk.mp3");
    finished_sound = new Audio("very important.mp3");
    
    autoSetStartTime();
    //setInterval(autoSetStartTime,1000);
    
    setInterval(handleTimers,1000);
    
    
    
    setInterval(setTitle,1000);
}

function setTitle(){
    var timer = undefined;
    for( var i = timers.length-1 ; i > -1 ; i-- ){
        if( timers[i][3] )
            timer = timers[i];
    }
    if( !timer )
        return;
    document.title = timer[0] + ":" + pad(timer[1].toString(),2) + ":" + pad(timer[2].toString(),2);
}

function pad( str, n ){
    while( str.length < n )
        str = "0" + str;
    return str;
}

function setVolume( vol ){
    alarms.forEach(function(a){a.volume=vol;});
    printVolume();
}

function setAlarms( file ){
    alarm = new Audio(file);
    alarm_alt = new Audio(file);
}

function printVolume(){
    alarms.forEach(function(a){console.log(a.volume);});
}

function autoSetStartTime(){
    var time = (new Date());
    
    if( time.getMinutes() == 59 ){
        time.setMinutes(0);
        time.setHours(time.getHours()+1);
    } else {
        time.setMinutes(time.getMinutes()+1);
    }
    
    var hoursString = (time.getHours()>12?time.getHours()-12:time.getHours()).toString();
    var minutesString = (time.getMinutes().toString().length==2?time.getMinutes():"0"+time.getMinutes()).toString();
    
    startTime.value = hoursString + ":" + minutesString + (time.getHours()>12?" PM":" AM");
}

function go(){
    haveSoundedFinishAlarm = false;

    var startSet = startTime.value.length != 0;
    var stopSet  = stopTime.value.length  != 0;
    var intSet   = intervals.value.length != 0;
    
    var times = new Array();
    
    if (startSet && intSet) {
        var numIntervals;
        var intervalMinutes;
        var totalStartMinutes = getTotalMinutes(getTimeFromAMPM(startTime.value));
        var totalStopMinutes;
        
        var now = new Date();
        var currentMinutes = getTotalMinutes(now.getHours()+":"+now.getMinutes());
        var timeOffset = totalStartMinutes - currentMinutes;
        
        if (stopSet) {
            numIntervals = Number(intervals.value);
            totalStopMinutes  = getTotalMinutes(stopTime.value);
            intervalMinutes = (totalStopMinutes-totalStartMinutes)/numIntervals;
        } else {
            var intervalSplit = intervals.value.split(",");
            intervalMinutes = getTotalMinutes(intervalSplit[0]);
            numIntervals = Number(intervalSplit[1]);
        }
        
        var offset = (timeOffset==0?1:0);
        
        for( var i = offset ; i < numIntervals+offset ; i++ ){
            times.push(getTimeFromMinutes(totalStartMinutes+intervalMinutes*i));
        }
    }
    
    if (times.length != 0) {
        addTimers(totalStartMinutes,times,timeOffset);
    }
}

function allTimersAreDone(){
    var allAreDone = true;
    for( var i = 0 ; i < timers.length ; i++ ){
        if( timers[i][3] ){
            allAreDone = false;
            break;
        }
    }
    
    return allAreDone;
}

function getTotalMinutes( str ){
    var val = str.split(":");
    return Number(val[0])*60 + Number(val[1]);
}

function getTimeFromMinutes( mins ){
    var time_hours = mins/60;
    var time_minutes = Math.round((time_hours - Math.floor(time_hours))*60);
    var time_hours = Math.floor(time_hours);
    return [time_hours,time_minutes,0,true];
}

function getTimeString( timeArr, am_pm ){

    var secondsString = timeArr[2].toString();
    if (secondsString.length == 1)
        secondsString = "0" + secondsString;

    var minutesString = timeArr[1].toString();
    if (minutesString.length == 1)
        minutesString = "0" + minutesString;
    
    var pm = false;
    hoursString = timeArr[0].toString();
    if( timeArr[0] > 12 && am_pm ){
        pm = true;
        hoursString = (timeArr[0]-12).toString();
    }
    
    if ( am_pm )
        return hoursString+":"+minutesString+":"+secondsString+(pm?" PM":" AM");
    else
        return hoursString+":"+minutesString+":"+secondsString;
}

function getTimeFromAMPM( str ){
    var str_split = str.split(" ");
    var pm = str_split[1] == "PM";
    var time_split = str_split[0].split(":");
    
    console.log(str + " = " + (Number(time_split[0])+(pm&&time_split[0]!=12?12:0)) + ":" + time_split[1]);
    
    return (Number(time_split[0])+(pm&&time_split[0]!=12?12:0)) + ":" + time_split[1];
}

function addTimers( totalStartMinutes, times, timeOffset ){
    while(timers.length>0)timers.pop();
    
    var time;
    var timer;
    
    for( var i = 0 ; i < times.length ; i++ ){
        time = times[i];
        timer = new Array();
        
        timers.push( getTimeFromMinutes(getTotalMinutes(getTimeString(time,false))-totalStartMinutes+timeOffset) )
    }
    
    var str = "";
    for( var i = 0 ; i < timers.length ; i++ ){
        str += '<div id='+i+'>';
        str += getTimeString(timers[i],false) + '</font><img src="x.jpeg" height="25px" width="25px" onclick="removeTimer('+i+')"></img></div>\n';
    }
    main.innerHTML = str;
}

function handleTimers(){
    var timersToRemove = new Array();
    var timer;
    var str = "";
    
    /*
    var displayNoneIndex = -1;
    
    for( var i = 0 ; i < timers.length ; i++ ){
        if (document.getElementById(i).style.display == "none"){
            displayNoneIndex = i;
            break;
        }
    }
    
    if (displayNoneIndex != -1){
        var newTimers = new Array();
        for( var i = 0 ; i < timers.length ; i++ ){
            if(i==displayNoneIndex)continue;
            newTimers.push(timers[i]);
        }
        timers = newTimers;
    }
    */
    
    for( var i = 0 ; i < timers.length ; i++ ){
        timer = timers[i];
        
        str += '<div id='+i+'>';
        if (!timer[3]){
            str += '<font color="#gray">' + getTimeString(timer,false) + "</font>"
            continue;
        }
            
            if (timer[2] > 0) {
                timer[2]--;
            } else if (timer[1] > 0) {
                timer[1]--;
                timer[2] = 59;
            } else if (timer[0] > 0) {
                timer[0]--;
                timer[1] = 59;
                timer[2] = 59;
            } else {
                playAlarm();
                timer[3] = false;
            }
        str += getTimeString(timer,false) + '</font><img src="x.jpeg" height="25px" width="25px" onclick="removeTimer('+i+')"></img></div>\n';
    }
    
    if( !haveSoundedFinishAlarm ) {
        if( allTimersAreDone() ){
            haveSoundedFinishAlarm = true;
            if( SHOULD_PLAY_FINISHED_SOUND )
                setTimeout(function(){finished_sound.play();},2500);
        }
    }
    
    main.innerHTML = str;
}

function removeTimer(x){
    document.getElementById(x).style.opacity="0.9";
    
    // /*
    var newTimers = new Array();
    for( var i = 0 ; i < timers.length ; i++ ){
        if(i==x)continue;
        newTimers.push(timers[i]);
    }
    timers = newTimers;
    // */
}

setInterval(function(){
    var divs = document.getElementsByTagName("div");
    for( var i = 0 ; i < divs.length ; i++ ){
        if (divs[i].style.opacity.length == 0) continue;
        divs[i].style.opacity -= 0.05;
        if (divs[i].style.opacity <= 0)
            divs[i].style.display = "none";
    }},10);
    
setInterval(function(){
    var timeStr;
    
    var time = (new Date());
    var hoursString = (time.getHours()>12?time.getHours()-12:time.getHours()).toString();
    var minutesString = (time.getMinutes().toString().length==2?time.getMinutes():"0"+time.getMinutes()).toString();
    
    timeStr = hoursString + ":" + minutesString + (time.getHours()>12?" PM":" AM");
    
    //now.disabled = timeStr == startTime.value
},250);

let total_time_playing = 0;
const target_time_playing = 8;

function replayOnce(audio_event) {
    audio_event.target.play();
    total_time_playing += audio_event.target.duration;
    if (total_time_playing >= target_time_playing) {
        audio_event.target.removeEventListener("ended", replayOnce);
    }
}

function playAlarm(){
    let this_alarm = new Audio(get_random_pokemon_sound());
    total_time_playing = 0;
    this_alarm.addEventListener("ended", replayOnce);
    this_alarm.play();
    /*
    if( Math.random() > 0.1 )
        alarm.play();
    else
        alarm_alt.play();
    */
}
    
</script>
</head>
<body onLoad="init();">
<br>
<br>
<br>
<br>
<br>
<center>
<input type="button"  id="now" value=" NOW " onClick="autoSetStartTime();"></input> 
<input type="textbox" id="start" style="width:180px;"></input> 
<input type="textbox" id="stop"  style="width:180px;"></input> 
<input type="textbox" id="intervals"  style="width:180px;" value="0:11,8"></input> 
<input type="button" value="  GO  " onClick="go();"></input> 
<div id="main">
</center>
</div>
</body>
</html>